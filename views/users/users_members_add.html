{% extends '../layout.html' %}

{% block head %}
{% parent %}
<!--STYLE_PLACEHOLDER-->
<link href="/public/style/home/index.css" rel="stylesheet" type="text/css">
<style type="text/css">
    .img {
        width: 100px;
        height: 100px;
        border: 1px dashed #ddd;
        position: relative;
        cursor: pointer;
    }
    .img input {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0;
        cursor: pointer;
    }
    .img .add {
        display: block;
        width: 30px;
        height: 30px;
        font-size: 30px;
        text-align: center;
        background: #337ab7;
        color: #fff;
        border: 1px solid #2e6da4;
        border-radius: 15px;
        line-height: 30px;
        position: absolute;
        top: 35px;
        left: 35px;
        cursor: pointer;
    }
</style>
{% endblock %}

{% block content %}
<div class="ww-wrapper">
    <div class="wrapper">
        <ol class="breadcrumb">
            <li><a href="#">首页</a></li>
            <li class="active">会员添加</li>
        </ol>
        <form id="user_form" class="form-horizontal" action="/users/membersAdd" method="post" novalidate
              onsubmit="return false;">
            <div class="panel panel-default">
                <div class="panel-heading">基本信息</div>
                <div class="panel-body">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="user_level" class="col-sm-4 control-label">
                                <span class="text-danger">*</span> 会员类型
                            </label>

                            <div class="col-sm-8">
                                <select class="form-control" id="user_level" name="memberlevel">
                                    <option value="">请选择</option>
                                    <option value="">会费会员</option>
                                    <option value="">储值会员</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="user_no" class="col-sm-4 control-label">
                                <span class="text-danger">*</span> 会员卡号
                            </label>

                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="user_no" name="memberid"
                                       placeholder="会员卡号" value="<%= data.memberid || 'FD000001' %>" readonly>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="user_money" class="col-sm-4 control-label">
                                <span class="text-danger">*</span> 初始预存额
                            </label>

                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="user_money" name="money"
                                       placeholder="初始预存额" autocomplete="off"
                                       data-val="true" data-val-required="初始预存额不能为空"
                                       data-val-regex-pattern="^[1-9][0-9]*$"
                                       data-val-regex="初始预存额格式错误"
                                       value="<%= data.users.money %>">
                                <div data-valmsg-for="money" data-valmsg-replace="true"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="user_cardtime" class="col-sm-4 control-label">
                                <span class="text-danger">*</span> 发卡日期
                            </label>

                            <div class="col-sm-8">
                                <input type="date" class="form-control" id="user_cardtime" name="cardtime"
                                       placeholder="发卡日期" autocomplete="off"
                                       data-val="true" data-val-required="发卡日期不能为空"
                                       value="<%= data.users.cardtime %>">
                                <div data-valmsg-for="cardtime" data-valmsg-replace="true"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="user_mobile" class="col-sm-4 control-label">
                                <span class="text-danger">*</span> 手机号码
                            </label>

                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="user_mobile" name="phone"
                                       placeholder="手机号码" autocomplete="off"
                                       data-val="true" data-val-required="手机号码不能为空"
                                       data-val-regex-pattern="^1\d{10}$"
                                       data-val-regex="手机号码格式错误"
                                       value="<%= data.users.phone %>">
                                <div data-valmsg-for="phone" data-valmsg-replace="true"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="recommend_no" class="col-sm-4 control-label">
                                <span class="text-danger">*</span> 推荐卡号
                            </label>

                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="recommend_no" name="recommendid"
                                       placeholder="推荐人卡号" value="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="user_name" class="col-sm-4 control-label">
                                <span class="text-danger">*</span> 会员姓名
                            </label>

                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="user_name" name="membername"
                                       placeholder="会员姓名, 例: 张三" autocomplete="off"
                                       data-val="true" data-val-required="会员姓名不能为空"
                                       data-val-regex-pattern="^[A-Za-z\u4e00-\u9fa5][A-Za-z0-9\u4e00-\u9fa5_]{1,10}$"
                                       data-val-regex="会员姓名长度只能2~12个字符"
                                       value="<%= data.users.membername %>">
                                <div data-valmsg-for="membername" data-valmsg-replace="true"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="user_score" class="col-sm-4 control-label">
                                <span class="text-danger">*</span> 初始积分
                            </label>

                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="user_score" name="score"
                                       placeholder="初始积分" autocomplete="off"
                                       data-val="true" data-val-required="初始积分不能为空"
                                       data-val-regex-pattern="^[1-9][0-9]*$"
                                       data-val-regex="初始积分格式错误"
                                       value="<%= data.users.money %>">
                                <div data-valmsg-for="money" data-valmsg-replace="true"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="user_period" class="col-sm-4 control-label">
                                <span class="text-danger">*</span> 有效期至
                            </label>

                            <div class="col-sm-8">
                                <input type="date" class="form-control" id="user_period" name="validityperiod"
                                       placeholder="会员卡有效期" autocomplete="off"
                                       data-val="true" data-val-required="有效期不能为空"
                                       value="<%= data.users.validityperiod %>">
                                <div data-valmsg-for="validityperiod" data-valmsg-replace="true"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="user_card" class="col-sm-4 control-label">
                                <span class="text-danger">*</span> 身份证号
                            </label>

                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="user_card" name="idnumber"
                                       placeholder="18位身份证号" autocomplete="off"
                                       data-val="true" data-val-required="身份证号不能为空"
                                       data-val-regex-pattern="^\d{18}$|^\d{17}(\d|X|x)$"
                                       data-val-regex="身份证号格式错误"
                                       value="<%= data.users.idnumber %>">
                                <div data-valmsg-for="idnumber" data-valmsg-replace="true"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">其他信息</div>
                <div class="panel-body">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="user_sex1" class="col-sm-4 control-label">
                                <span class="text-danger">*</span> 性别
                            </label>

                            <div class="col-sm-8">
                                <label class="radio-inline">
                                    <input type="radio" name="sex" id="user_sex1" value="0" checked> 男
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="sex" id="user_sex2" value="1"> 女
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="user_address" class="col-sm-4 control-label">联系地址</label>

                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="user_address" name="addr"
                                       placeholder="联系地址" value="<%= data.users.addr %>">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label for="user_photo" class="col-sm-2 control-label">会员照片</label>

                            <div class="col-sm-10">
                                <div class="img">
                                    <input type="file" id="user_photo" name="photo" accept="image/*">
                                    <span class="add">+</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="user_comments" class="col-sm-2 control-label">备注</label>

                            <div class="col-sm-10">
                            <textarea class="form-control" id="user_comments" name="remarks" rows="3" placeholder="备注"
                                      value="<%= data.users.remarks %>"></textarea>
                            </div>
                        </div>
                        <div class="form-group sc-ui-submit">
                            <div class="col-sm-offset-4 col-sm-8">
                                <p class="sc-submit-tips"></p>
                                <button type="button" class="btn btn-primary sc-submit" data-toggle="modal"
                                        data-target="#confirmModal">
                                    <span class="glyphicon glyphicon-ok"></span> 办 卡
                                </button>
                                <a href="/users/members" class="btn btn-default">
                                    <span class="glyphicon glyphicon-arrow-left"></span> 返回会员列表
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="modal fade bs-example-modal-sm" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="confirmModalLabel">提示框</h4>
            </div>
            <div class="modal-body">
                <p>会员卡已经办理成功, 您的手机会收到一条密码短信, 请注意查收.</p>
                <p>您需要打印发票吗?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">
                    <span class="glyphicon glyphicon-ok"></span> 确 认
                </button>
                <button type="button" class="btn btn-default" data-dismiss="modal">
                    <span class="glyphicon glyphicon-remove"></span> 关 闭
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{% parent %}
<!--SCRIPT_PLACEHOLDER-->
<script>
    (function ($) {
        /*$(".sc-submit").on("click", function (e) {
         e.preventDefault();

         var $form = $("#user_form");

         $.post('/users/membersAdd', $form.serialize(), function (res) {
         if (res.status == 200) {
         ;
         }
         });
         })*/
    })(jQuery);
</script>
{% endblock %}
